<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:rkwRegistration="http://typo3.org/ns/RKW/RkwRegistration/ViewHelpers"
      xmlns:rkwMailer="http://typo3.org/ns/RKW/RkwMailer/ViewHelpers"
      data-namespace-typo3-fluid="true">

    <f:layout name="Email/{mailType}" />


    <!-- PLAINTEXT -->
    <f:section name="Plaintext"><rkwMailer:email.plaintextLineBreaks>
        <rkwMailer:email.recipientSalutation queueRecipient="{queueRecipient}"
               prependText="{rkwMailer:email.translate(key:'templates_email_group_optinAdmin.headline', languageKey:'{queueRecipient.languageCode}', extensionName:'rkwRegistration')}, "
               appendText="!"
               fallbackText="{rkwMailer:email.translate(key:'templates_email_group_optinAdmin.headline', languageKey='{queueRecipient.languageCode}', extensionName:'rkwRegistration')}!"
        />\n\n

        <rkwMailer:email.translate key="templates_email_group_optinAdmin.text1" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" arguments="{0: frontendUserGroup.title}" />\n\n
        
        {frontendUser.firstName} {frontendUser.lastName} ({frontendUser.email}) \n\n

        <rkwMailer:email.translate key="templates_email_group_optinAdmin.textOptIn" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" />\n
        <rkwMailer:email.uri.action action="optIn" controller="FrontendUserGroup" extensionName="rkwRegistration" pluginName="authInternal"
             absolute="true" noCacheHash="true" pageUid="{settings.registrationPid}"
             additionalParams="{tx_rkwregistration_authinternal: {token: tokenYes, user: tokenUser}}"/>\n\n

        <rkwMailer:email.translate key="templates_email_group_optinAdmin.textOptOut" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" arguments="{0: settings.users.daysForOptIn}" />\n
        <rkwMailer:email.uri.action action="optIn" controller="FrontendUserGroup" extensionName="rkwRegistration" pluginName="authInternal"
             absolute="true" noCacheHash="true" pageUid="{settings.registrationPid}"
             additionalParams="{tx_rkwregistration_authinternal: {token: tokenNo, user: tokenUser}}" />
    </rkwMailer:email.plaintextLineBreaks></f:section>


    <!-- HTML -->
    <f:section name="Html">
        <h1>
            <rkwMailer:email.recipientSalutation queueRecipient="{queueRecipient}"
                   prependText="{rkwMailer:email.translate(key:'templates_email_group_optinAdmin.headline', languageKey:'{queueRecipient.languageCode}', extensionName:'rkwRegistration')}, "
                   appendText="!"
                   fallbackText="{rkwMailer:email.translate(key:'templates_email_group_optinAdmin.headline', languageKey='{queueRecipient.languageCode}', extensionName:'rkwRegistration')}!"
            />
        </h1>
        <p><rkwMailer:email.translate key="templates_email_group_optinAdmin.text1" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" arguments="{0: frontendUserGroup.title}" /></p>
        <p><strong>{frontendUser.firstName} {frontendUser.lastName} ({frontendUser.email})</strong></p>
        <p>
            <rkwMailer:email.translate key="templates_email_group_optinAdmin.textOptIn" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration"/><br>
            <a href="<rkwMailer:email.uri.action action='optIn' controller='FrontendUserGroup' extensionName='rkwRegistration' pluginName='authInternal' absolute='true' noCacheHash='true' pageUid='{settings.registrationPid}' additionalParams='{tx_rkwregistration_authinternal: {token: tokenYes, user: tokenUser}}' />"><rkwMailer:email.translate key="templates_email_group_optinAdmin.textOptInLinkLabel" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration"/></a>
        </p>
        <p>
            <rkwMailer:email.translate key="templates_email_group_optinAdmin.textOptOut" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" arguments="{0: settings.users.daysForOptIn}" /><br>
            <a href="<rkwMailer:email.uri.action action='optIn' controller='FrontendUserGroup' extensionName='rkwRegistration' pluginName='authInternal' absolute='true' noCacheHash='true' pageUid='{settings.registrationPid}' additionalParams='{tx_rkwregistration_authinternal: {token: tokenNo, user: tokenUser}}'  />"><rkwMailer:email.translate key="templates_email_group_optinAdmin.textOptOutLinkLabel" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration"/></a>
        </p>
    </f:section>
</html>
