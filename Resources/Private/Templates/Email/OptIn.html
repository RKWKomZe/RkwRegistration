<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
      xmlns:rkwRegistration="http://typo3.org/ns/RKW/RkwRegistration/ViewHelpers"
      xmlns:rkwMailer="http://typo3.org/ns/RKW/RkwMailer/ViewHelpers"
      data-namespace-typo3-fluid="true">

    <f:layout name="Email/{mailType}" />


    <!-- PLAINTEXT -->
    <f:section name="Plaintext"><rkwMailer:email.plaintextLineBreaks>
        <rkwMailer:email.recipientSalutation queueRecipient="{queueRecipient}"
                                       prependText="{rkwMailer:email.translate(key:'templates_email_optin.headline', languageKey:'{queueRecipient.languageCode}', extensionName:'rkwRegistration')}, "
                                       appendText="!"
                                       fallbackText="{rkwMailer:email.translate(key:'templates_email_optin.headline', languageKey='{queueRecipient.languageCode}', extensionName:'rkwRegistration)}!"
        />\n\n

        <rkwMailer:email.translate key="templates_email_optin.text1" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" />\n\n

        <rkwMailer:email.translate key="templates_email_optin.textOptIn" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" />\n
        <rkwMailer:email.uri.action action="optIn" controller="Registration" extensionName="rkwRegistration" pluginName="register"
                                 absolute="true" noCacheHash="TRUE" pageUid="{settings.users.registrationPid}"
                                 additionalParams="{tx_rkwregistration_register: {token: tokenYes, user: userSha1}}"/>\n\n

        <rkwMailer:email.translate key="templates_email_optin.textOptOut" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" arguments="{0: settings.users.daysForOptIn}" />\n
        <rkwMailer:email.uri.action action="optIn" controller="Registration" extensionName="rkwRegistration" pluginName="register"
                                 absolute="true" noCacheHash="TRUE" pageUid="{settings.users.registrationPid}"
                                 additionalParams="{tx_rkwregistration_register: {token: tokenNo, user: userSha1}}" />
    </rkwMailer:email.plaintextLineBreaks></f:section>


    <!-- HTML -->
    <f:section name="Html">
        <h1>
            <rkwMailer:email.recipientSalutation queueRecipient="{queueRecipient}"
                                           prependText="{rkwMailer:email.translate(key:'templates_email_optin.headline', languageKey:'{queueRecipient.languageCode}', extensionName:'rkwRegistration')}, "
                                           appendText="!"
                                           fallbackText="{rkwMailer:email.translate(key:'templates_email_optin.headline', languageKey='{queueRecipient.languageCode}', extensionName:'rkwRegistration)}!"
            />
        </h1>
        <p><rkwMailer:email.translate key="templates_email_optin.text1" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" /></p>
        <p>
            <rkwMailer:email.translate key="templates_email_optin.textOptIn" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration"/><br>
            <a href="<rkwMailer:email.uri.action action='optIn' controller='Registration' extensionName='rkwRegistration' pluginName='register' absolute='true' noCacheHash='TRUE' pageUid='{settings.users.registrationPid}' additionalParams='{tx_rkwregistration_register: {token: tokenYes, user: userSha1}}' />"><rkwMailer:email.translate key="templates_email_optin.textOptInLinkLabel" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration"/></a>
        </p>
        <p>
            <rkwMailer:email.translate key="templates_email_optin.textOptOut" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration" arguments="{0: settings.users.daysForOptIn}" /><br>
            <a href="<rkwMailer:email.uri.action action='optIn' controller='Registration' extensionName='rkwRegistration' pluginName='register' absolute='true' noCacheHash='TRUE' pageUid='{settings.users.registrationPid}' additionalParams='{tx_rkwregistration_register: {token: tokenNo, user: userSha1}}'  />"><rkwMailer:email.translate key="templates_email_optin.textOptOutLinkLabel" languageKey="{frontendUser.txRkwregistrationLanguageKey}" extensionName="rkwRegistration"/></a>
        </p>
    </f:section>
</html>
